
<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>Cubed &#8212; Cubed</title>
    
  <!-- Loaded before other Sphinx assets -->
  <link href="_static/styles/theme.css?digest=1999514e3f237ded88cf" rel="stylesheet">
<link href="_static/styles/pydata-sphinx-theme.css?digest=1999514e3f237ded88cf" rel="stylesheet">

    
  <link rel="stylesheet"
    href="_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    <link rel="stylesheet" href="_static/styles/sphinx-book-theme.css?digest=5115cc725059bd94278eecd172e13a965bf8f5a9" type="text/css" />
    
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="_static/scripts/pydata-sphinx-theme.js?digest=1999514e3f237ded88cf">

    <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/scripts/sphinx-book-theme.js?digest=9c920249402e914e316237a7dbc6769907cce411"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Getting Started" href="getting_started.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="en">
    

    <!-- Google Analytics -->
    
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="60">
<!-- Checkboxes to toggle the left sidebar -->
<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation" aria-label="Toggle navigation sidebar">
<label class="overlay overlay-navbar" for="__navigation">
    <div class="visually-hidden">Toggle navigation sidebar</div>
</label>
<!-- Checkboxes to toggle the in-page toc -->
<input type="checkbox" class="sidebar-toggle" name="__page-toc" id="__page-toc" aria-label="Toggle in-page Table of Contents">
<label class="overlay overlay-pagetoc" for="__page-toc">
    <div class="visually-hidden">Toggle in-page Table of Contents</div>
</label>
<!-- Headers at the top -->
<div class="announcement header-item noprint"></div>
<div class="header header-item noprint"></div>

    
    <div class="container-fluid" id="banner"></div>

    

    <div class="container-xl">
      <div class="row">
          
<!-- Sidebar -->
<div class="bd-sidebar noprint" id="site-navigation">
    <div class="bd-sidebar__content">
        <div class="bd-sidebar__top"><div class="navbar-brand-box">
    <a class="navbar-brand text-wrap" href="#">
      
      
      
      <h1 class="site-logo" id="site-title">Cubed</h1>
      
    </a>
</div><form class="bd-search d-flex align-items-center" action="search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search the docs ..." aria-label="Search the docs ..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item active">
        <p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  For users
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="getting_started.html">
   Getting Started
  </a>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="api.html">
   API Reference
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/>
  <label for="toctree-checkbox-1">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="generated/cubed.Array.html">
     cubed.Array
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="generated/cubed.Array.compute.html">
     cubed.Array.compute
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="generated/cubed.Array.rechunk.html">
     cubed.Array.rechunk
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="generated/cubed.Array.visualize.html">
     cubed.Array.visualize
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="generated/cubed.compute.html">
     cubed.compute
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="generated/cubed.visualize.html">
     cubed.visualize
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="generated/cubed.from_array.html">
     cubed.from_array
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="generated/cubed.from_zarr.html">
     cubed.from_zarr
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="generated/cubed.store.html">
     cubed.store
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="generated/cubed.to_zarr.html">
     cubed.to_zarr
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="generated/cubed.apply_gufunc.html">
     cubed.apply_gufunc
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="generated/cubed.map_blocks.html">
     cubed.map_blocks
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="generated/cubed.random.random.html">
     cubed.random.random
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="generated/cubed.Callback.html">
     cubed.Callback
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="generated/cubed.Spec.html">
     cubed.Spec
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="generated/cubed.TaskEndEvent.html">
     cubed.TaskEndEvent
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="generated/cubed.measure_reserved_memory.html">
     cubed.measure_reserved_memory
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="generated/cubed.runtime.executors.beam.BeamDagExecutor.html">
     cubed.runtime.executors.beam.BeamDagExecutor
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="generated/cubed.runtime.executors.lithops.LithopsDagExecutor.html">
     cubed.runtime.executors.lithops.LithopsDagExecutor
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="generated/cubed.runtime.executors.modal_async.AsyncModalDagExecutor.html">
     cubed.runtime.executors.modal_async.AsyncModalDagExecutor
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="generated/cubed.runtime.executors.python.PythonDagExecutor.html">
     cubed.runtime.executors.python.PythonDagExecutor
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="array_api.html">
   Python Array API
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="related_projects.html">
   Related Projects
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference external" href="https://github.com/tomwhite/cubed/tree/main/examples/README.md">
   Examples
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  For developers
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="design.html">
   Design
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="operations.html">
   Operations
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="computation.html">
   Computation
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="contributing.html">
   Contributing
  </a>
 </li>
</ul>

    </div>
</nav></div>
        <div class="bd-sidebar__bottom">
             <!-- To handle the deprecated key -->
            
            <div class="navbar_extra_footer">
            Theme by the <a href="https://ebp.jupyterbook.org">Executable Book Project</a>
            </div>
            
        </div>
    </div>
    <div id="rtd-footer-container"></div>
</div>


          


          
<!-- A tiny helper pixel to detect if we've scrolled -->
<div class="sbt-scroll-pixel-helper"></div>
<!-- Main content -->
<div class="col py-0 content-container">
    
    <div class="header-article row sticky-top noprint">
        



<div class="col py-1 d-flex header-article-main">
    <div class="header-article__left">
        
        <label for="__navigation"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="right"
title="Toggle navigation"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-bars"></i>
  </span>

</label>

        
    </div>
    <div class="header-article__right">
<div class="menu-dropdown menu-dropdown-repository-buttons">
  <button class="headerbtn menu-dropdown__trigger"
      aria-label="Source repositories">
      <i class="fab fa-github"></i>
  </button>
  <div class="menu-dropdown__content">
    <ul>
      <li>
        <a href="https://github.com/tomwhite/cubed"
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Source repository"
>
  

<span class="headerbtn__icon-container">
  <i class="fab fa-github"></i>
  </span>
<span class="headerbtn__text-container">repository</span>
</a>

      </li>
      
      <li>
        <a href="https://github.com/tomwhite/cubed/issues/new?title=Issue%20on%20page%20%2Findex.html&body=Your%20issue%20content%20here."
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Open an issue"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-lightbulb"></i>
  </span>
<span class="headerbtn__text-container">open issue</span>
</a>

      </li>
      
      <li>
        <a href="https://github.com/tomwhite/cubed/edit/master/index.md"
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Edit this page"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-pencil-alt"></i>
  </span>
<span class="headerbtn__text-container">suggest edit</span>
</a>

      </li>
      
    </ul>
  </div>
</div>
<label for="__page-toc"
  class="headerbtn headerbtn-page-toc"
  
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-list"></i>
  </span>

</label>

    </div>
</div>

<!-- Table of contents -->
<div class="col-md-3 bd-toc show noprint">
    <div class="tocsection onthispage pt-5 pb-3">
        <i class="fas fa-list"></i> Contents
    </div>
    <nav id="bd-toc-nav" aria-label="Page">
        <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#bounded-memory-serverless-distributed-n-dimensional-array-processing">
   Bounded-memory serverless distributed N-dimensional array processing
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#motivation">
   Motivation
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#documentation">
   Documentation
  </a>
  <ul class="nav section-nav flex-column">
  </ul>
 </li>
</ul>

    </nav>
</div>
    </div>
    <div class="article row">
        <div class="col pl-md-3 pl-lg-5 content-container">
            <!-- Table of contents that is only displayed when printing the page -->
            <div id="jb-print-docs-body" class="onlyprint">
                <h1>Cubed</h1>
                <!-- Table of contents -->
                <div id="print-main-content">
                    <div id="jb-print-toc">
                        
                        <div>
                            <h2> Contents </h2>
                        </div>
                        <nav aria-label="Page">
                            <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#bounded-memory-serverless-distributed-n-dimensional-array-processing">
   Bounded-memory serverless distributed N-dimensional array processing
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#motivation">
   Motivation
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#documentation">
   Documentation
  </a>
  <ul class="nav section-nav flex-column">
  </ul>
 </li>
</ul>

                        </nav>
                    </div>
                </div>
            </div>
            <main id="main-content" role="main">
                
              <div>
                
  <section id="cubed">
<h1>Cubed<a class="headerlink" href="#cubed" title="Permalink to this headline">#</a></h1>
<section id="bounded-memory-serverless-distributed-n-dimensional-array-processing">
<h2>Bounded-memory serverless distributed N-dimensional array processing<a class="headerlink" href="#bounded-memory-serverless-distributed-n-dimensional-array-processing" title="Permalink to this headline">#</a></h2>
<p>Cubed is a distributed N-dimensional array library implemented in Python using bounded-memory serverless processing and Zarr for storage.</p>
<ul class="simple">
<li><p>Implements the <a class="reference external" href="https://data-apis.org/array-api/latest/">Python Array API standard</a></p></li>
<li><p>Guaranteed maximum memory usage for standard array functions</p></li>
<li><p>Follows <a class="reference external" href="https://docs.dask.org/en/stable/array.html">Dask Array</a>’s chunked array API (<code class="docutils literal notranslate"><span class="pre">map_blocks</span></code>, <code class="docutils literal notranslate"><span class="pre">rechunk</span></code>, etc)</p></li>
<li><p><a class="reference external" href="https://zarr.readthedocs.io/en/stable/">Zarr</a> for storage</p></li>
<li><p>Multiple serverless runtimes: Python (in-process), <a class="reference external" href="https://lithops-cloud.github.io/">Lithops</a>, <a class="reference external" href="https://modal.com/">Modal</a>, <a class="reference external" href="https://beam.apache.org/">Apache Beam</a></p></li>
</ul>
</section>
<section id="motivation">
<h2>Motivation<a class="headerlink" href="#motivation" title="Permalink to this headline">#</a></h2>
<p>Managing memory is one of the major challenges in designing and running distributed systems. Computation frameworks like Apache Hadoop’s MapReduce, Apache Spark, Beam, and Dask all provide a general-purpose processing model, which has lead to their widespread adoption. Successful use at scale however requires the user to carefully configure memory for worker nodes, and to understand how work is allocated to workers, which breaks the high-level programming abstraction. A disproportionate amount of time is often spent tuning the memory configuration of a large computation.</p>
<p>A common theme here is that most interesting computations are not embarrassingly parallel, but involve shuffling data between nodes. A lot of engineering effort has been put into optimizing the shuffle in Hadoop, Spark, Beam (Google Dataflow), and to a lesser extent Dask. This has undoubtedly improved performance, but has not made the memory problems go away.</p>
<p>Another approach has started gaining traction in the last few years. <a class="reference external" href="https://lithops-cloud.github.io/">Lithops</a> (formerly Pywren) and <a class="reference external" href="https://rechunker.readthedocs.io/">Rechunker</a>, eschew centralized systems like the shuffle, and do everything via serverless cloud services and cloud storage.</p>
<p>Rechunker is interesting, since it implements a very targeted use case (rechunking persistent N-dimensional arrays), using only stateless (serverless) operations, with guaranteed memory usage. Even though it can run on systems like Beam and Dask, it deliberately avoids passing array chunks between worker nodes using the shuffle. Instead, all bulk data operations are reads from, or writes to, cloud storage (Zarr in this case). Since chunks are always of known size it is possible to tightly control memory usage, thereby avoiding unpredictable memory use at runtime.</p>
<p>This project is an attempt to go further: implement all distributed array operations using a bounded-memory serverless model.</p>
</section>
<section id="documentation">
<h2>Documentation<a class="headerlink" href="#documentation" title="Permalink to this headline">#</a></h2>
<div class="toctree-wrapper compound">
<p aria-level="2" class="caption" role="heading"><span class="caption-text">For users</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="getting_started.html">Getting Started</a><ul>
<li class="toctree-l2"><a class="reference internal" href="getting_started.html#installation">Installation</a></li>
<li class="toctree-l2"><a class="reference internal" href="getting_started.html#example">Example</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="api.html">API Reference</a><ul>
<li class="toctree-l2"><a class="reference internal" href="api.html#array">Array</a></li>
<li class="toctree-l2"><a class="reference internal" href="api.html#io">IO</a></li>
<li class="toctree-l2"><a class="reference internal" href="api.html#chunk-specific-functions">Chunk-specific functions</a></li>
<li class="toctree-l2"><a class="reference internal" href="api.html#random-number-generation">Random number generation</a></li>
<li class="toctree-l2"><a class="reference internal" href="api.html#runtime">Runtime</a></li>
<li class="toctree-l2"><a class="reference internal" href="api.html#executors">Executors</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="array_api.html">Python Array API</a><ul>
<li class="toctree-l2"><a class="reference internal" href="array_api.html#missing-from-cubed">Missing from Cubed</a></li>
<li class="toctree-l2"><a class="reference internal" href="array_api.html#differences-between-cubed-and-the-standard">Differences between Cubed and the standard</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="related_projects.html">Related Projects</a><ul>
<li class="toctree-l2"><a class="reference internal" href="related_projects.html#dask">Dask</a></li>
<li class="toctree-l2"><a class="reference internal" href="related_projects.html#previous-work">Previous work</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference external" href="https://github.com/tomwhite/cubed/tree/main/examples/README.md">Examples</a></li>
</ul>
</div>
<div class="toctree-wrapper compound">
<p aria-level="2" class="caption" role="heading"><span class="caption-text">For developers</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="design.html">Design</a><ul>
<li class="toctree-l2"><a class="reference internal" href="design.html#storage">Storage</a></li>
<li class="toctree-l2"><a class="reference internal" href="design.html#runtime">Runtime</a></li>
<li class="toctree-l2"><a class="reference internal" href="design.html#primitive-operations">Primitive operations</a></li>
<li class="toctree-l2"><a class="reference internal" href="design.html#core-operations">Core operations</a></li>
<li class="toctree-l2"><a class="reference internal" href="design.html#array-api">Array API</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="operations.html">Operations</a><ul>
<li class="toctree-l2"><a class="reference internal" href="operations.html#dependency-tree">Dependency Tree</a></li>
<li class="toctree-l2"><a class="reference internal" href="operations.html#elemwise"><code class="docutils literal notranslate"><span class="pre">elemwise</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="operations.html#map-blocks"><code class="docutils literal notranslate"><span class="pre">map_blocks</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="operations.html#map-direct"><code class="docutils literal notranslate"><span class="pre">map_direct</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="operations.html#blockwise"><code class="docutils literal notranslate"><span class="pre">blockwise</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="operations.html#rechunk"><code class="docutils literal notranslate"><span class="pre">rechunk</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="operations.html#reduction-and-arg-reduction"><code class="docutils literal notranslate"><span class="pre">reduction</span></code> and <code class="docutils literal notranslate"><span class="pre">arg_reduction</span></code></a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="computation.html">Computation</a><ul>
<li class="toctree-l2"><a class="reference internal" href="computation.html#plan">Plan</a></li>
<li class="toctree-l2"><a class="reference internal" href="computation.html#memory">Memory</a></li>
<li class="toctree-l2"><a class="reference internal" href="computation.html#execution">Execution</a></li>
<li class="toctree-l2"><a class="reference internal" href="computation.html#runtime-features">Runtime Features</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="contributing.html">Contributing</a><ul>
<li class="toctree-l2"><a class="reference internal" href="contributing.html#development">Development</a></li>
</ul>
</li>
</ul>
</div>
</section>
</section>


              </div>
              
            </main>
            <footer class="footer-article noprint">
                
    <!-- Previous / next buttons -->
<div class='prev-next-area'>
    <a class='right-next' id="next-link" href="getting_started.html" title="next page">
    <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Getting Started</p>
    </div>
    <i class="fas fa-angle-right"></i>
    </a>
</div>
            </footer>
        </div>
    </div>
    <div class="footer-content row">
        <footer class="col footer"><p>
  
    By Tom White<br/>
  
      &copy; Copyright 2022, Tom White.<br/>
</p>
        </footer>
    </div>
    
</div>


      </div>
    </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="_static/scripts/pydata-sphinx-theme.js?digest=1999514e3f237ded88cf"></script>


  </body>
</html>